{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/loufi/Documents/Epitech/Paas/byop/api/.blitz/caches/dev/app/auth/components/LoginForm.tsx\";\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Link } from \"blitz\";\nimport { LabeledTextField } from \"app/components/LabeledTextField\";\nimport { Form, FORM_ERROR } from \"app/components/Form\";\nimport login from \"app/auth/mutations/login\";\nimport { LoginInput } from \"app/auth/validations\";\nexport var LoginForm = function LoginForm(props) {\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }\n  }, \"Login\"), __jsx(Form, {\n    submitText: \"Log In\",\n    schema: LoginInput,\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    onSubmit: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return login({\n                  email: values.email,\n                  password: values.password\n                });\n\n              case 3:\n                props.onSuccess && props.onSuccess();\n                _context.next = 13;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!(_context.t0.name === \"AuthenticationError\")) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, \"Sorry, those credentials are invalid\"));\n\n              case 12:\n                return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, \"Sorry, we had an unexpected error. Please try again. - \" + _context.t0.toString()));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }\n  }, __jsx(LabeledTextField, {\n    name: \"email\",\n    label: \"Email\",\n    placeholder: \"Email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }), __jsx(LabeledTextField, {\n    name: \"password\",\n    label: \"Password\",\n    placeholder: \"Password\",\n    type: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    style: {\n      marginTop: \"1rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, \"Or \", __jsx(Link, {\n    href: \"/signup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }\n  }, \"Sign Up\")));\n};\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/Users/loufi/Documents/Epitech/Paas/byop/api/.blitz/caches/dev/app/auth/components/LoginForm.tsx"],"names":["React","Link","LabeledTextField","Form","FORM_ERROR","login","LoginInput","LoginForm","props","email","password","values","onSuccess","name","toString","marginTop"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,OAArB;AACA,SAASC,gBAAT,QAAiC,iCAAjC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,qBAAjC;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,SAASC,UAAT,QAA2C,sBAA3C;AAMA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAA2B;AAClD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAGE,MAAC,IAAD;AACE,IAAA,UAAU,EAAC,QADb;AAEE,IAAA,MAAM,EAAEF,UAFV;AAGE,IAAA,aAAa,EAAE;AAAEG,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,QAAQ,EAAE;AAAvB,KAHjB;AAIE,IAAA,QAAQ;AAAA,0EAAE,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAN,KAAK,CAAC;AAAEI,kBAAAA,KAAK,EAAEE,MAAM,CAACF,KAAhB;AAAuBC,kBAAAA,QAAQ,EAAEC,MAAM,CAACD;AAAxC,iBAAD,CAFL;;AAAA;AAGNF,gBAAAA,KAAK,CAACI,SAAN,IAAmBJ,KAAK,CAACI,SAAN,EAAnB;AAHM;AAAA;;AAAA;AAAA;AAAA;;AAAA,sBAKF,YAAMC,IAAN,KAAe,qBALb;AAAA;AAAA;AAAA;;AAAA,qEAMMT,UANN,EAMmB,sCANnB;;AAAA;AAAA,qEASDA,UATC,EAUA,4DAA4D,YAAMU,QAAN,EAV5D;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;AAAA,OAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAoBE,MAAC,gBAAD;AAAkB,IAAA,IAAI,EAAC,OAAvB;AAA+B,IAAA,KAAK,EAAC,OAArC;AAA6C,IAAA,WAAW,EAAC,OAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBF,EAqBE,MAAC,gBAAD;AAAkB,IAAA,IAAI,EAAC,UAAvB;AAAkC,IAAA,KAAK,EAAC,UAAxC;AAAmD,IAAA,WAAW,EAAC,UAA/D;AAA0E,IAAA,IAAI,EAAC,UAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,CAHF,EA2BE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACK,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADL,CA3BF,CADF;AAiCD,CAlCM;KAAMR,S;AAoCb,eAAeA,SAAf","sourcesContent":["import React from \"react\"\nimport { Link } from \"blitz\"\nimport { LabeledTextField } from \"app/components/LabeledTextField\"\nimport { Form, FORM_ERROR } from \"app/components/Form\"\nimport login from \"app/auth/mutations/login\"\nimport { LoginInput, LoginInputType } from \"app/auth/validations\"\n\ntype LoginFormProps = {\n  onSuccess?: () => void\n}\n\nexport const LoginForm = (props: LoginFormProps) => {\n  return (\n    <div>\n      <h1>Login</h1>\n\n      <Form<LoginInputType>\n        submitText=\"Log In\"\n        schema={LoginInput}\n        initialValues={{ email: \"\", password: \"\" }}\n        onSubmit={async (values) => {\n          try {\n            await login({ email: values.email, password: values.password })\n            props.onSuccess && props.onSuccess()\n          } catch (error) {\n            if (error.name === \"AuthenticationError\") {\n              return { [FORM_ERROR]: \"Sorry, those credentials are invalid\" }\n            } else {\n              return {\n                [FORM_ERROR]:\n                  \"Sorry, we had an unexpected error. Please try again. - \" + error.toString(),\n              }\n            }\n          }\n        }}\n      >\n        <LabeledTextField name=\"email\" label=\"Email\" placeholder=\"Email\" />\n        <LabeledTextField name=\"password\" label=\"Password\" placeholder=\"Password\" type=\"password\" />\n      </Form>\n\n      <div style={{ marginTop: \"1rem\" }}>\n        Or <Link href=\"/signup\">Sign Up</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}