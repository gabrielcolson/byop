{"ast":null,"code":"import db from \"db\";\nexport default async function getCurrentUser(_ = null, ctx = {}) {\n  var _ctx$session;\n\n  if (!((_ctx$session = ctx.session) === null || _ctx$session === void 0 ? void 0 : _ctx$session.userId)) return null;\n  const user = await db.user.findOne({\n    where: {\n      id: ctx.session.userId\n    },\n    select: {\n      id: true,\n      name: true,\n      email: true,\n      role: true\n    }\n  });\n  return user;\n}","map":{"version":3,"sources":["/Users/loufi/Documents/Epitech/Paas/byop/api/.blitz/caches/dev/app/_resolvers/users/queries/getCurrentUser.ts"],"names":["db","getCurrentUser","_","ctx","session","userId","user","findOne","where","id","select","name","email","role"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AAGA,eAAe,eAAeC,cAAf,CAA8BC,CAAC,GAAG,IAAlC,EAAwCC,GAAiC,GAAG,EAA5E,EAAgF;AAAA;;AAC7F,MAAI,kBAACA,GAAG,CAACC,OAAL,iDAAC,aAAaC,MAAd,CAAJ,EAA0B,OAAO,IAAP;AAE1B,QAAMC,IAAI,GAAG,MAAMN,EAAE,CAACM,IAAH,CAAQC,OAAR,CAAgB;AACjCC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,EAAE,EAAEN,GAAG,CAACC,OAAJ,CAAaC;AAAnB,KAD0B;AAEjCK,IAAAA,MAAM,EAAE;AAAED,MAAAA,EAAE,EAAE,IAAN;AAAYE,MAAAA,IAAI,EAAE,IAAlB;AAAwBC,MAAAA,KAAK,EAAE,IAA/B;AAAqCC,MAAAA,IAAI,EAAE;AAA3C;AAFyB,GAAhB,CAAnB;AAKA,SAAOP,IAAP;AACD","sourcesContent":["import db from \"db\"\nimport { SessionContext } from \"blitz\"\n\nexport default async function getCurrentUser(_ = null, ctx: { session?: SessionContext } = {}) {\n  if (!ctx.session?.userId) return null\n\n  const user = await db.user.findOne({\n    where: { id: ctx.session!.userId },\n    select: { id: true, name: true, email: true, role: true },\n  })\n\n  return user\n}\n"]},"metadata":{},"sourceType":"module"}